window.onload=function(){if(document.cookie&&!0==postJsonLoad){let a,b=document.cookie;b=b.slice(5);let c=JSON.parse(b);for(let b=0;b<c.length;b++){a+=""+c[b].name+"";let d=c.length-1;b<d&&(a+=",")}a=a.replace(/^undefined/,""),document.querySelector("#text-filter").innerHTML=a}};let postJsonLoad=!0;document.querySelector("#btnfilter").addEventListener("click",function(){document.querySelector("#openfilter").classList.add("open"),!0==postJsonLoad&&(async()=>{const a=await fetch("https://studika.ru/api/areas",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({})}),b=await a.json();let c;(function(a){for(let b=0;b<a.length;b++)if(c+="<div class=\"block-sity_id\" data-name=\""+a[b].name+"\" data-id=\""+a[b].id+"\" data-type=\""+a[b].type+"\"><span class=\"block-sity_id-title\">"+a[b].name+"</span></div>",a[b].cities)for(let d=0;d<a[b].cities.length;d++)c+="<div class=\"block-sity_id\" data-name=\""+a[b].cities[d].name+"\" data-id=\""+a[b].cities[d].id+"\" data-type=\""+a[b].cities[d].type+"\"><span class=\"block-sity_id-title\">"+a[b].cities[d].name+"</span><span class=\"block-sity_id-text\">"+a[b].name+"</span></div>"})(b),c=c.replace(/^undefined/,""),document.getElementById("sity_list").innerHTML=c})()});const targetNodeLoad=document.getElementById("sity_list"),configLoad={childList:!0},callbackLoad=a=>{document.querySelectorAll(".block-sity_id");for(const b of a)if("childList"===b.type){if(document.cookie&&!0==postJsonLoad){let a,b,c=document.cookie;c=c.slice(5);let d=JSON.parse(c),e=document.querySelectorAll(".block-sity_id");for(let b=0;b<d.length;b++){for(let a=0;a<e.length;a++)d[b].id==e[a].dataset.id&&e[a].classList.add("checked");a+="<div class=\"city_select\" data-name=\""+d[b].name+"\" data-id=\""+d[b].id+"\" data-type=\""+d[b].type+"\">"+d[b].name+"<img src=\"img/close_w.svg\" class=\"close_w\" loading=\"lazy\" alt=\"close\"></div>"}a=a.replace(/^undefined/,""),document.getElementById("sity_select").innerHTML=a;for(let a=0;a<d.length;a++){b+=""+d[a].name+"";let c=d.length-1;a<c&&(b+=",")}b=b.replace(/^undefined/,""),document.querySelector("#text-filter").innerHTML=b}postJsonLoad=!1}},observerLoad=new MutationObserver(callbackLoad);observerLoad.observe(targetNodeLoad,configLoad),document.addEventListener("click",a=>{const b=a.composedPath().includes(document.querySelector(".top-left_wrapper-sity"));b||document.querySelector("#openfilter").classList.remove("open")}),filter.oninput=function(){let a=document.querySelector("#filter"),b=document.querySelectorAll(".block-sity_id-title"),c=document.querySelectorAll(".block-sity_id");for(let d=0;d<b.length;d++){let e=b[d].innerText,f=e.toLowerCase().search(RegExp(a.value.toLowerCase())),g=a.value.toLowerCase().length,h=e.substr(f,g),i=e.replace(h,"<em>"+h+"</em>");~b[d].innerText.toLowerCase().indexOf(a.value.toLowerCase())?(c[d].classList.remove("off"),b[d].innerHTML=i):(c[d].classList.add("off"),e.replace("<em>",""),e.replace("</em>",""),b[d].innerHTML=e)}};function clearOninput(){let a=document.querySelectorAll(".block-sity_id-title"),b=document.querySelectorAll(".block-sity_id");for(let c,d=0;d<a.length;d++)c=a[d].innerText,b[d].classList.remove("off"),c.replace("<em>",""),c.replace("</em>",""),a[d].innerHTML=c}const targetNode=document.getElementById("sity_list"),config={childList:!0},callback=a=>{let b=document.querySelectorAll(".block-sity_id");for(const c of a)if("childList"===c.type)for(let a=0;a<b.length;a++)b[a].addEventListener("click",()=>{b[a].classList.contains("checked")?(b[a].classList.remove("checked"),document.querySelector("[data-id=\""+b[a].dataset.id+"\"]").remove()):(b[a].classList.add("checked"),document.getElementById("sity_select").innerHTML+="<div class=\"city_select\" data-name=\""+b[a].dataset.name+"\" data-id=\""+b[a].dataset.id+"\" data-type=\""+b[a].dataset.type+"\">"+b[a].dataset.name+"<img src=\"img/close_w.svg\" class=\"close_w\" loading=\"lazy\" alt=\"close\"></div>")})},observer=new MutationObserver(callback);observer.observe(targetNode,config);const targetNode2=document.getElementById("sity_select"),config2={childList:!0},callback2=a=>{let b=document.querySelectorAll(".close_w");for(const c of a)if("childList"===c.type)for(let a=0;a<b.length;a++)b[a].addEventListener("click",()=>{let c=b[a].parentElement.dataset.id,d=document.querySelector(".block-sity_id[data-id=\""+c+"\"]");d.classList.remove("checked"),b[a].parentElement.remove()})},observer2=new MutationObserver(callback2);observer2.observe(targetNode2,config2),document.querySelector(".block-sity_button").addEventListener("click",function(){let a=document.querySelectorAll(".city_select"),b="",c="";if(a.length){for(let c,d=0;d<a.length;d++){c=a[d].innerText,b+=""+c+"";let e=a.length-1;d<e&&(b+=",")}document.querySelector("#text-filter").innerHTML=b,document.querySelector("#openfilter").classList.remove("open"),c+="[";for(let b=0;b<a.length;b++){c+="{\"name\":\""+a[b].dataset.name+"\",",c+="\"id\":\""+a[b].dataset.id+"\",",c+="\"type\":\""+a[b].dataset.type+"\"}";let d=a.length-1;b<d&&(c+=",")}c+="]",document.cookie="user="+c+"",Upload(c)}});function Upload(a){let b=new XMLHttpRequest;b.onreadystatechange=function(){4==this.readyState&&200==this.status&&alert("Upload File")},b.open("POST","http://webservis.beget.tech/",!0),b.send(a)}document.querySelector("[href=\"#openModal\"]").addEventListener("click",function(){document.body.style.overflow="hidden",document.querySelector("#openModal").classList.add("open")}),document.querySelector("[href=\"#close\"]").addEventListener("click",function(){document.body.style.overflow="visible",document.querySelector("#openModal").classList.remove("open")}),document.querySelector("[href=\"#openModalphone\"]").addEventListener("click",function(){document.body.style.overflow="hidden",document.querySelector("#openModal").classList.add("open")}),document.querySelector("[href=\"#close\"]").addEventListener("click",function(){document.body.style.overflow="visible",document.querySelector("#openModal").classList.remove("open")});let Settings={navBarTravelling:!1,navBarTravelDirection:"",navBarTravelDistance:150},BtnLeft=document.getElementById("menuBtnLeft"),BtnRight=document.getElementById("menuBtnRight"),menu_viewer=document.getElementById("menu_viewer"),menu_content=document.getElementById("menu_content"),scroll_position=0,ticking=!1;menu_viewer.setAttribute("data-overflowing",determineOverflow(menu_content,menu_viewer));function doSomething(){menu_viewer.setAttribute("data-overflowing",determineOverflow(menu_content,menu_viewer))}menu_viewer.addEventListener("scroll",function(){scroll_position=window.scrollY,ticking||window.requestAnimationFrame(function(){doSomething(scroll_position),ticking=!1}),ticking=!0}),BtnLeft.addEventListener("click",function(){if(!0!==Settings.navBarTravelling){if("left"===determineOverflow(menu_content,menu_viewer)||"both"===determineOverflow(menu_content,menu_viewer)){let a=menu_viewer.scrollLeft;menu_content.style.transform=a<2*Settings.navBarTravelDistance?"translateX("+a+"px)":"translateX("+Settings.navBarTravelDistance+"px)",menu_content.classList.remove("no-transition"),Settings.navBarTravelDirection="left",Settings.navBarTravelling=!0}menu_viewer.setAttribute("data-overflowing",determineOverflow(menu_content,menu_viewer))}}),BtnRight.addEventListener("click",function(){if(!0!==Settings.navBarTravelling){if("right"===determineOverflow(menu_content,menu_viewer)||"both"===determineOverflow(menu_content,menu_viewer)){let a=menu_content.getBoundingClientRect().right,b=menu_viewer.getBoundingClientRect().right,c=Math.floor(a-b);menu_content.style.transform=c<2*Settings.navBarTravelDistance?"translateX(-"+c+"px)":"translateX(-"+Settings.navBarTravelDistance+"px)",menu_content.classList.remove("no-transition"),Settings.navBarTravelDirection="right",Settings.navBarTravelling=!0}menu_viewer.setAttribute("data-overflowing",determineOverflow(menu_content,menu_viewer))}}),menu_content.addEventListener("transitionend",function(){let a=window.getComputedStyle(menu_content,null),b=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform"),c=Math.abs(parseInt(b.split(",")[4])||0);menu_content.style.transform="none",menu_content.classList.add("no-transition"),"left"===Settings.navBarTravelDirection?menu_viewer.scrollLeft-=c:menu_viewer.scrollLeft+=c,Settings.navBarTravelling=!1},!1);function determineOverflow(a,b){let c=b.getBoundingClientRect(),d=Math.floor(c.right),e=Math.floor(c.left),f=a.getBoundingClientRect(),g=Math.floor(f.right),h=Math.floor(f.left);return e>h&&d<g?"both":h<e?"left":g>d?"right":"none"}